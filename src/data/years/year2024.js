// 2024年408真题完整数据（选择题 + 大题）

// 选择题（40道）
export const choices = [
  // 数据结构 (1-11题)
  { subject: 'ds', q: '已知带头结点的非空单链表L的头指针为h，指针p指向L中间的一个链表结点（不是第一个和最后一个结点）。q=p->next，p->next=q->next，q->next=h->next，h->next=q。这段代码的功能是？', options: ['删除p所指结点', '删除p的后继结点', '将p的后继结点移到表尾', '将p的后继结点移到表头'], answer: 3 },
  { subject: 'ds', q: '表达式 x+y*(z-u)/v 的等价后缀表达式是？', options: ['xyzu-*v/+', 'xyzu-v/*+', '+x/*y-zuv', '+x*y/-zuv'], answer: 0 },
  { subject: 'ds', q: 'p、q、v都是二叉树T中的结点，二叉树T的中序遍历为···,p,v,q,···，其中v有两个孩子结点，则下列说法正确的是？', options: ['p是v的祖先', 'q是v的祖先', 'p在v的左子树中', 'q在v的右子树中'], answer: 3 },
  { subject: 'ds', q: '下列数据结构中，不适合直接使用折半查找的是？I.有序链表 II.无序数组 III.有序静态链表 IV.无序静态链表', options: ['仅I、II', '仅I、II、III', '仅I、II、IV', 'I、II、III、IV'], answer: 3 },
  { subject: 'ds', q: 'KMP算法使用修正后的next数组进行模式匹配，模式串S="aabaab"，当主串中某字符与S中某字符失配时，S将向右滑动的最长距离是？', options: ['3', '4', '5', '6'], answer: 2 },
  { subject: 'ds', q: '一棵二叉搜索树如图所示，K1、K2、K3分别是对应结点中保存的关键字，三角形表示子树。则子树T中任一结点中保存的关键字X满足？', options: ['X<K1', 'X>K3', 'K1<X<K2', 'K2<X<K3'], answer: 3 },
  { subject: 'ds', q: '使用快速排序算法对含N(N>=3)个元素的数组M进行排序，若第一趟排序将除枢轴外的N-1个元素划分为P和Q两个部分，则下列叙述正确的是？', options: ['P中元素都小于枢轴', 'Q中元素都大于枢轴', 'P和Q中元素个数相等', 'P中最大元素小于Q中最小元素'], answer: 3 },
  { subject: 'ds', q: '已知关键字序列28,22,20,19,8,12,15,5是大根堆，对该堆进行两次删除操作后，得到的新堆是？', options: ['20,19,15,5,8,12', '20,19,12,5,8,15', '19,15,12,5,8', '19,12,15,5,8'], answer: 0 },
  { subject: 'ds', q: '初始有三个升序序列(3,5)、(7,9)、(6)，若按从左至右的次序选择有序序列进行二路归并排序，则关键字之间的总比较次数是？', options: ['4', '5', '6', '7'], answer: 1 },
  { subject: 'ds', q: '在外排序中，利用败者树对初始为升序的归并段进行多路归并，败者树中记录"冠军"的结点保存的是？', options: ['最小关键字', '最大关键字', '最小关键字所在归并段号', '最大关键字所在归并段号'], answer: 2 },
  { subject: 'ds', q: '若无向图G=(V,E)中有7个顶点，要保证图G在任何情况下都是连通的，则需要的边数至少是？', options: ['6', '15', '16', '21'], answer: 2 },
  // 计算机组成原理 (12-22题)
  { subject: 'co', q: 'C语言代码：int i=32777; short si=i; int j=si; 执行后j的值为？', options: ['-32759', '-32760', '32777', '32776'], answer: 0 },
  { subject: 'co', q: '将汇编语言程序中实现特定功能的指令序列定义成一条伪指令。CPU能理解并直接执行的是？I.伪指令 II.微指令 III.机器指令 IV.汇编指令', options: ['仅II', '仅III', '仅II、III', '仅III、IV'], answer: 2 },
  { subject: 'co', q: '若整型参数α和β的取值范围分别为-2^20~2^20、-2^40~2^40，则α和β最适宜采用的数据表示方法分别是？', options: ['int、long long', 'short、int', 'int、double', 'float、double'], answer: 0 },
  { subject: 'co', q: '下列关于整数乘法运算的叙述中，错误的是？', options: ['用阵列乘法器实现乘运算可以在一个时钟周期完成', '用ALU和移位器实现的乘运算无法在一个时钟周期内完成', '变量与常数的乘运算可编译优化为若干条移位及加/减运算指令', '两个变量的乘运算无法编译为移位及加法等指令的循环实现'], answer: 3 },
  { subject: 'co', q: '对于页式虚拟存储管理系统，下列关于存储器层次结构的叙述中，错误的是？', options: ['Cache-主存层次的映射由硬件完成', '主存-外存层次的映射由软件完成', 'Cache-主存层次采用直接映射或组相联映射', '主存-外存层次采用直接映射'], answer: 3 },
  { subject: 'co', q: '某计算机按字节编址，采用页式虚拟存储管理方式，虚拟地址为32位，主存地址为30位，页大小为1KB。若TLB共有32个表项，采用4路组相联映射方式，则TLB表项中标记字段的位数至少是？', options: ['17', '18', '19', '20'], answer: 2 },
  { subject: 'co', q: '下列事件中，不是在MMU地址转换过程检测的是？', options: ['缺页', '页面访问越界', '页面写保护违例', '整数除零'], answer: 3 },
  { subject: 'co', q: '在采用"取指、译码/取数、执行、访存、写回"5段流水线的RISC处理器中，下列关于指令流水线数据冒险处理的叙述中，错误的是？', options: ['相邻指令存在数据相关时可能发生数据冒险', '插入气泡可避免数据冒险', '采用旁路技术可避免所有数据冒险', '插入气泡可避免所有数据冒险'], answer: 2 },
  { subject: 'co', q: '某存储器总线的时钟频率为420MHz，总线宽度为64位，每个时钟周期传送2次数据。该总线的总线带宽（最大传输速率）为？', options: ['3.84GB/s', '6.72GB/s', '7.68GB/s', '13.44GB/s'], answer: 1 },
  { subject: 'co', q: '下列关于中断I/O方式的叙述中，错误的是？', options: ['中断响应顺序可由中断屏蔽字控制', '中断处理过程需要保护现场', '中断服务程序的入口地址由中断向量提供', '中断屏蔽字可以改变中断响应顺序'], answer: 3 },
  { subject: 'co', q: 'DMA方式中，DMA控制器控制的数据传输通路位于？', options: ['CPU与主存之间', 'CPU与I/O设备之间', '主存与I/O设备之间', 'I/O设备与I/O设备之间'], answer: 2 },
  // 操作系统 (23-32题)
  { subject: 'os', q: '下面关于中断和异常的说法中，错误的是？', options: ['中断或异常发生时，CPU处于用户态', '操作系统为每种系统调用提供了对应的内核服务例程', '中断处理程序在内核态下执行', '系统添加新类型设备时，需注册相应的中断服务例程'], answer: 0 },
  { subject: 'os', q: '下列选项中，操作系统在终止进程时不一定执行的是？', options: ['释放进程占用的资源', '撤销进程的PCB', '将进程从就绪队列中移除', '通知父进程'], answer: 2 },
  { subject: 'os', q: '在支持页式存储管理的系统中，进程切换时OS要执行？I.更新PC值 II.更新栈基址寄存器值 III.更新页表基址寄存器值', options: ['仅I', '仅I、II', '仅I、III', 'I、II、III'], answer: 3 },
  { subject: 'os', q: '文件系统需要额外的外存空间记录空闲块的位置，占用外存空间大小与当前空闲块数量无关的是？', options: ['空闲表法', '空闲链表法', '位示图法', '成组链接法'], answer: 2 },
  { subject: 'os', q: '回收分区时，仅合并大小相等的空闲分区的算法是？', options: ['伙伴算法', '最佳适应算法', '最坏适应算法', '首次适应算法'], answer: 0 },
  { subject: 'os', q: '若进程P中有一个线程T打开文件后获得fd，再创建线程Ta、Tb，则线程Ta、Tb可共享的资源是？I.进程P的地址空间 II.线程T的栈 III.fd', options: ['仅I', '仅I、II', '仅I、III', 'I、II、III'], answer: 2 },
  { subject: 'os', q: '以下系统调用中，包含文件按名查找功能的系统调用是？', options: ['open()', 'read()', 'write()', 'close()'], answer: 0 },
  { subject: 'os', q: '假设某系统使用时间片轮转调度算法进行CPU调度，时间片大小为5ms，系统共有10个进程，初始时均处于就绪队列。若队尾的进程P所需CPU时间最短为25ms，则进程P的周转时间为？', options: ['205ms', '230ms', '250ms', '275ms'], answer: 1 },
  { subject: 'os', q: '键盘中断服务例程执行结束时，所输入的数据存放位置是？', options: ['用户缓冲区', 'CPU中的通用寄存器', '内核缓冲区', '键盘控制器的数据寄存器'], answer: 2 },
  { subject: 'os', q: '某磁盘的磁道数为400（磁道号为0~399），采用循环扫描算法(CSCAN)进行磁盘调度，完成对200号磁道的请求后，磁头向磁道号减小的方向移动。若还有7个请求，对应的磁道号分别为300,120,110,0,160,210,399，则完成上述磁盘请求后磁头移动的距离是？', options: ['688', '788', '888', '988'], answer: 1 },
  // 计算机网络 (33-40题)
  { subject: 'cn', q: '若分组交换网络及每段链路的带宽如图所示，则H1到H2的最大吞吐量约为？', options: ['10Mbps', '20Mbps', '50Mbps', '100Mbps'], answer: 0 },
  { subject: 'cn', q: '在下列二进制数字调制方法中，需要2个不同频率载波的是？', options: ['ASK', 'PSK', 'FSK', 'DPSK'], answer: 2 },
  { subject: 'cn', q: '支持VLAN划分的交换机，已按端口划分了3个VLAN。H4位于VLAN1，H6位于VLAN3，下列选项中不会出现在H4的ARP表中的是？', options: ['H2的记录', 'H1的记录', 'H3的记录', 'H6的记录'], answer: 3 },
  { subject: 'cn', q: '在采用CSMA/CA的802.11无线局域网中，DIFS=120μs，SIFS=28μs，RTS、CTS和ACK帧的传输时延分别是3μs、2μs和2μs。若主机A欲向AP发送一个总长度为1998B的数据帧，无线链路带宽为54Mb/s，则隐藏站B收到AP发送的CTS帧时，设置的网络分配向量NAV的值是？', options: ['296μs', '324μs', '354μs', '382μs'], answer: 2 },
  { subject: 'cn', q: '主机甲通过选择重传(SR)滑动窗口协议向主机乙发送帧，序号位数为3比特，发送窗口与接收窗口大小相同且均为最大值。甲在t1时刻和t2时刻发送的数据帧分别是？', options: ['F0和F1', 'F0和F4', 'F4和F0', 'F4和F5'], answer: 2 },
  { subject: 'cn', q: '假设主机H通过TCP向服务器发送长度为3000B的报文，RTT=10ms，MSL=30s，MSS=1000B，忽略TCP段的传输时延。报文传输结束后H首先请求断开连接，则从H请求建立TCP连接时刻起，到H进入CLOSED状态为止，所需时间至少是？', options: ['40.04s', '50.04s', '60.04s', '70.04s'], answer: 2 },
  { subject: 'cn', q: '若UDP协议在计算校验和过程中，计算机得到中间结果为1011 1001 1011 0110时，还需要加上最后一个16位数0110 0101 1100 0101，则最终计算得到的校验和是？', options: ['0001 1111 0111 1100', '1110 0000 1000 0011', '0001 1111 0111 1011', '1110 0000 1000 0100'], answer: 1 },
  { subject: 'cn', q: '若浏览器不支持并行TCP连接，使用非持久的HTTP/1.0协议请求浏览1个web页，该页中引用同一个网站上7个小图像文件，则从浏览器传输web页请求建立TCP连接开始，到接收完所有内容为止，所需要的往返时间RTT数至少是？', options: ['8', '16', '24', '32'], answer: 1 },
];

// 大题（7道）
export const essays = [
  {
    id: 41,
    subject: 'ds',
    title: '拓扑排序唯一性判定',
    score: 13,
    question: `已知有向图G采用邻接矩阵存储，类型定义如下：
typedef struct {
    int numVertices, numEdges;
    char verticesList[MAXV];
    int Edge[MAXV][MAXV];
} MGraph;

请设计算法：int uniquely(MGraph G)，判定G是否存在唯一的拓扑序列，若是则返回1，否则返回0。`,
    answer: `【设计思想】
输出拓扑序列的过程：依次从图中选取入度为0的点进行输出。
确保拓扑序列唯一需要保证：在输出拓扑序列时，每一次有且仅有一个入度为0的顶点。

【算法实现】
int uniquely(MGraph g) {
    int n = g.numVertices;
    int inDegrees[MAXV];
    
    for (int v = 0; v < n; v++) {
        inDegrees[v] = 0;
        for (int i = 0; i < n; i++) {
            if (g.Edge[i][v] != 0)
                inDegrees[v] += g.Edge[i][v];
        }
    }
    
    for (int k = 0; k < n; k++) {
        int count0 = 0, v0 = -1;
        for (int i = 0; i < n; i++) {
            if (inDegrees[i] == 0) { count0++; v0 = i; }
        }
        if (count0 != 1) return 0;
        inDegrees[v0] = -1;
        for (int j = 0; j < n; j++) {
            if (g.Edge[v0][j] != 0) inDegrees[j]--;
        }
    }
    return 1;
}`,
    tags: ['拓扑排序', '邻接矩阵', '图']
  },
  {
    id: 42,
    subject: 'ds',
    title: '散列表构造与查找',
    score: 10,
    question: `将关键字 20,3,11,18,9,14,7 依次存储到长度为11的散列表HT中，散列函数为 H(key)=(key×3)%11，采用二次探测法处理冲突。
(1) 画出所构造的HT，并计算HT的装填因子
(2) 给出在HT中查找关键字14的关键字比较序列
(3) 在HT中查找关键字8，确认查找失败时的散列地址是多少？`,
    answer: `(1) 散列表HT：
地址: 0   1   2   3   4   5   6   7   8   9   10
内容: 11  -   14  7   20  -   9   -   -   3   18
装填因子 = 7/11

(2) 查找关键字14的比较序列：3 → 18 → 14

(3) 查找关键字8失败时的散列地址是7`,
    tags: ['散列表', '哈希', '二次探测']
  },
  {
    id: 43,
    subject: 'co',
    title: '指令格式与数据通路分析',
    score: 13,
    question: `假定计算机M字长为32位，按字节编址，采用32位定长指令字。指令add、slli和lw的格式、编码和功能如图所示。
(1) 计算机M最多有多少个通用寄存器？为什么shamt字段占5位？
(2) 执行add指令时，控制信号ALUBsrc的取值应该是什么？
(3) 执行slli指令时，控制信号Ext的取值可以是0也可以是1，为什么？
(4) 若一条指令的机器码是A040 A103H，则该指令一定是lw指令，为什么？`,
    answer: `(1) 寄存器用5位表示，最多有2⁵=32个寄存器。shamt表示左移位数，机器字长32位，log₂32=5位即可表示。

(2) ALUBsrc = 0

(3) slli指令的高12位最高位为0，无论零扩展还是符号扩展，都是在高位补0，效果等价。

(4) A040 A103H的6~0位=0000011，14~12位=010，符合lw指令编码。add和slli的高12位都是000H，而该指令高12位为A04H，所以一定是lw指令。`,
    tags: ['指令格式', '数据通路', 'ALU']
  },
  {
    id: 44,
    subject: 'co',
    title: '汇编指令与存储管理',
    score: 8,
    question: `C语言程序P包含的语句 sum+=a[i]; 在M中对应的指令序列S如下：
slli r4, r2, 2    // R[r4] <- R[r2]<<2
add r4, r3, r4    // R[r4] <- R[r3]+R[r4]
lw r5, 0(r4)      // R[r5] <- M[R[r4]+0]
add r1, r1, r5    // R[r1] <- R[r1]+R[r5]

(1) 写出存放数组a的首地址、变量i和sum的通用寄存器编号
(2) 若i=5且r1和r3的内容分别为0000 1332H和0013 DFF0H，则a[i]的地址、a[i]和sum的机器数分别是什么？`,
    answer: `(1) a的首地址存放在r3，i存放在r2，sum存放在r1

(2) a[i]的地址 = 0013 DFF0H + 5×4 = 0013 E004H
a[i]的机器数 = FFFF ECDCH
sum的机器数 = 0000 000EH`,
    tags: ['汇编代码', '虚拟页式管理']
  },
  {
    id: 45,
    subject: 'os',
    title: '页式虚拟存储管理',
    score: 7,
    question: `某计算机按字节编址，采用页式虚拟存储管理方式，虚拟地址和物理地址的长度均为32位，页表项的大小为4字节，页大小为4MB。
进程P的页表起始虚拟地址为B8C0 0000H，被装载到从物理地址6540 0000H开始的连续主存空间中。
(1) 若CPU访问虚拟地址1234 5678H时发生了缺页异常，则该页表项的虚拟地址和物理地址分别是什么？
(2) 进程P的页表所在页的页号是什么？该页对应的页表项的虚拟地址是什么？`,
    answer: `(1) 页大小4MB = 2²²B，页内偏移22位，页号10位
虚拟地址1234 5678H的页号 = 048H
页表项虚拟地址 = B8C0 0000H + 048H×4 = B8C0 0120H
页表项物理地址 = 6540 0000H + 048H×4 = 6540 0120H

(2) 页表起始虚拟地址B8C0 0000H的页号 = 2E3H
该页对应的页表项虚拟地址 = B8C0 0000H + 2E3H×4 = B8C0 0B8CH`,
    tags: ['虚拟页式管理', '缺页异常', '页表']
  },
  {
    id: 46,
    subject: 'os',
    title: '进程同步与信号量',
    score: 8,
    question: `在某网络系统中缓冲区B用于存放一个数据分组，对B的操作有C1、C2和C3。C1将一个数据分组写入B中，C2从B中读出一个数据分组，C3对B中的数据分组进行修改。要求B为空时才能执行C1，B非空时才能执行C2和C3。
(1) 假设进程P1和P2均需执行C1，实现C1的代码是否为临界区？为什么？
(2) 假设B初始为空，进程P1执行C1一次，进程P2执行C2一次。请定义尽可能少的信号量。
(3) 假设B初始不为空，进程P1和P2各执行C3一次，请定义尽可能少的信号量。`,
    answer: `(1) 是临界区。因为P1和P2都需要将数据写入共享缓冲区B，如果同时执行C1会导致数据不一致，需要互斥访问。

(2) 定义信号量：
semaphore mutex = 1;  // 互斥访问缓冲区
semaphore full = 0;   // 缓冲区是否有数据

(3) 定义信号量：
semaphore mutex = 1;  // 互斥访问缓冲区`,
    tags: ['进程同步', '信号量', '临界区']
  },
  {
    id: 47,
    subject: 'cn',
    title: '路由协议与BGP',
    score: 9,
    question: `假设现有互联网中的4个自治系统互连拓扑示意图如图所示。其中，AS1运行内部网关协议RIP；AS3规模较小，自治系统内任意两个主机间通信经过路由器数不超过15个；AS4规模较大，自治系统内任意两个主机间通信经过路由器数量可能超过20个。
(1) 若仅有RIP和OSPF内部网关协议供选择，则AS4应选择哪个协议？
(2) 若AS3中的某主机向本自治系统另一主机发送1个IP分组，则该IP分组的初始TTL值应至少设置为多少？
(3) 从交换初始距离向量时刻算起，R11~R16路由器均获得到达网络210.2.4.0/24的正确路由，至少需多长时间？`,
    answer: `(1) AS4应选择OSPF协议。RIP最大跳数限制为15，超过15跳的网络不可达。

(2) TTL至少应设置为16。最多经过15个路由器，每经过一个路由器TTL减1。

(3) 至少需要60秒。RIP采用距离向量算法，每次更新信息只能传播1跳，每次传播30秒。`,
    tags: ['路由协议', 'RIP', 'OSPF', 'BGP']
  }
];

// 导出完整年份数据
export const year2024 = {
  year: 2024,
  choices,
  essays,
  totalChoices: choices.length,
  totalEssays: essays.length
};

export default year2024;
